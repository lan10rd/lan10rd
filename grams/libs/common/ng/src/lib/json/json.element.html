<!-- <ul
*ngFor = "let list of object | keyvalue; let i=index"
>
    <li>
        {{list.key}}

        <ng-container
        [ngSwitch]="json.typeOf(list.value)"
        >

            <input
            *ngSwitchCase="'str'"
            [(ngModel)]="list.value"
            placeholder="{{list.key}}"
            >

            <input
            *ngSwitchCase="'num'"
            [(ngModel)]="list.value"
            type="number"
            >

            <ng-container
            *ngSwitchCase="'boo'"
            >
                {{list.value}}
            </ng-container>

            <common-ng-json-element
            *ngSwitchDefault
            [(object)]="list.value"
            ></common-ng-json-element>

        </ng-container>

    </li>
</ul> -->

<ul
*ngFor="let key of keys; let i=index; trackBy: json.trackBy"
>

    <li>
        <div
        *ngIf="!editing.keys.includes(key)"
        (click)="editing.keys.push(key)"
        >
            {{key}} 
        </div>
        <div
        *ngIf="editing.keys.includes(key)"
        >
            <input
            class="bl"
            #keysi
            (focusout)="editing.keys = json.remove(editing.keys, key)"
            [ngModel]="keys[i]"
            (keyup.enter)="editing.keys = json.remove(editing.keys, key); changeKey(keysi.value, i)"
            >

            <select [(ngModel)]="mode" (ngModelChange)="handleMode($event, key)">
                <option [ngValue]="'pretty'">pretty</option>
                <option [ngValue]="'raw'">raw</option>
            </select>

            <button (click)="object[key] = json.parse(editing.values[key])" *ngIf="mode === 'raw'">save</button>

            <button>add</button>
        </div>

        <ng-container
        [ngSwitch]="mode"
        >
        
            <ng-container
            *ngSwitchCase="'pretty'"
            >
                <ng-container
                [ngSwitch]="json.typeOf(object[key])"
                >

                    <!-- <input
                    *ngSwitchCase="'str'"
                    [(ngModel)]="object[key]"
                    placeholder="{{key}}"
                    > -->

                    <textarea
                    *ngSwitchCase="'str'"
                    [(ngModel)]="object[key]"
                    ></textarea>

                    <input
                    *ngSwitchCase="'num'"
                    [(ngModel)]="object[key]"
                    type="number"
                    >

                    <ng-container
                    *ngSwitchCase="'boo'"
                    >
                        {{object[key]}}
                    </ng-container>

                    <common-ng-json-element
                    *ngSwitchDefault
                    [(object)]="object[key]"
                    ></common-ng-json-element>

                </ng-container>
            </ng-container>

            <ng-container
            *ngSwitchCase="'raw'"
            >

                <textarea
                [(ngModel)]="editing.values[key]"
                ></textarea>

            </ng-container>

        </ng-container>

    </li>
</ul>